// ==============================================================
// RTL generated by Vivado(TM) HLS - High-Level Synthesis from C, C++ and SystemC
// Version: 2016.1
// Copyright (C) 1986-2016 Xilinx, Inc. All Rights Reserved.
// 
// ===========================================================

#include "Sobel_rgb2yuv_bt709.h"
#include "AESL_pkg.h"

using namespace std;

namespace ap_rtl {

const sc_logic Sobel_rgb2yuv_bt709::ap_const_logic_1 = sc_dt::Log_1;
const bool Sobel_rgb2yuv_bt709::ap_true = true;
const sc_lv<8> Sobel_rgb2yuv_bt709::ap_const_lv8_0 = "00000000";
const sc_lv<12> Sobel_rgb2yuv_bt709::ap_const_lv12_0 = "000000000000";
const sc_lv<9> Sobel_rgb2yuv_bt709::ap_const_lv9_0 = "000000000";
const sc_lv<32> Sobel_rgb2yuv_bt709::ap_const_lv32_10 = "10000";
const sc_lv<32> Sobel_rgb2yuv_bt709::ap_const_lv32_17 = "10111";
const sc_lv<23> Sobel_rgb2yuv_bt709::ap_const_lv23_36 = "110110";
const sc_lv<24> Sobel_rgb2yuv_bt709::ap_const_lv24_B7 = "10110111";
const sc_logic Sobel_rgb2yuv_bt709::ap_const_logic_0 = sc_dt::Log_0;

Sobel_rgb2yuv_bt709::Sobel_rgb2yuv_bt709(sc_module_name name) : sc_module(name), mVcdFile(0) {
    Sobel_mac_muladd_16ns_7ns_21ns_23_1_U427 = new Sobel_mac_muladd_16ns_7ns_21ns_23_1<1,1,16,7,21,23>("Sobel_mac_muladd_16ns_7ns_21ns_23_1_U427");
    Sobel_mac_muladd_16ns_7ns_21ns_23_1_U427->din0(grp_fu_114_p0);
    Sobel_mac_muladd_16ns_7ns_21ns_23_1_U427->din1(grp_fu_114_p1);
    Sobel_mac_muladd_16ns_7ns_21ns_23_1_U427->din2(grp_fu_114_p2);
    Sobel_mac_muladd_16ns_7ns_21ns_23_1_U427->dout(grp_fu_114_p3);
    Sobel_mac_muladd_16ns_9ns_23ns_24_1_U428 = new Sobel_mac_muladd_16ns_9ns_23ns_24_1<1,1,16,9,23,24>("Sobel_mac_muladd_16ns_9ns_23ns_24_1_U428");
    Sobel_mac_muladd_16ns_9ns_23ns_24_1_U428->din0(grp_fu_123_p0);
    Sobel_mac_muladd_16ns_9ns_23ns_24_1_U428->din1(grp_fu_123_p1);
    Sobel_mac_muladd_16ns_9ns_23ns_24_1_U428->din2(grp_fu_123_p2);
    Sobel_mac_muladd_16ns_9ns_23ns_24_1_U428->dout(grp_fu_123_p3);

    SC_METHOD(thread_ap_clk_no_reset_);
    dont_initialize();
    sensitive << ( ap_clk.pos() );

    SC_METHOD(thread_ap_return);
    sensitive << ( ap_ce );
    sensitive << ( grp_fu_123_p3 );

    SC_METHOD(thread_f_g_fu_55_p3);
    sensitive << ( g_read_reg_138 );

    SC_METHOD(thread_f_r_fu_48_p3);
    sensitive << ( r_read_reg_143 );

    SC_METHOD(thread_grp_fu_114_p0);
    sensitive << ( grp_fu_114_p00 );

    SC_METHOD(thread_grp_fu_114_p00);
    sensitive << ( f_r_fu_48_p3 );

    SC_METHOD(thread_grp_fu_114_p1);

    SC_METHOD(thread_grp_fu_114_p2);
    sensitive << ( grp_fu_114_p20 );

    SC_METHOD(thread_grp_fu_114_p20);
    sensitive << ( tmp_5_fu_92_p2 );

    SC_METHOD(thread_grp_fu_123_p0);
    sensitive << ( grp_fu_123_p00 );

    SC_METHOD(thread_grp_fu_123_p00);
    sensitive << ( f_g_fu_55_p3 );

    SC_METHOD(thread_grp_fu_123_p1);

    SC_METHOD(thread_grp_fu_123_p2);
    sensitive << ( grp_fu_123_p20 );

    SC_METHOD(thread_grp_fu_123_p20);
    sensitive << ( grp_fu_114_p3 );

    SC_METHOD(thread_p_shl1_cast_fu_88_p1);
    sensitive << ( p_shl1_fu_81_p3 );

    SC_METHOD(thread_p_shl1_fu_81_p3);
    sensitive << ( b_read_reg_132 );

    SC_METHOD(thread_p_shl_cast_fu_77_p1);
    sensitive << ( p_shl_fu_70_p3 );

    SC_METHOD(thread_p_shl_fu_70_p3);
    sensitive << ( b_read_reg_132 );

    SC_METHOD(thread_tmp_5_fu_92_p2);
    sensitive << ( p_shl1_cast_fu_88_p1 );
    sensitive << ( p_shl_cast_fu_77_p1 );

    static int apTFileNum = 0;
    stringstream apTFilenSS;
    apTFilenSS << "Sobel_rgb2yuv_bt709_sc_trace_" << apTFileNum ++;
    string apTFn = apTFilenSS.str();
    mVcdFile = sc_create_vcd_trace_file(apTFn.c_str());
    mVcdFile->set_time_unit(1, SC_PS);
    if (1) {
#ifdef __HLS_TRACE_LEVEL_PORT_HIER__
    sc_trace(mVcdFile, ap_clk, "(port)ap_clk");
    sc_trace(mVcdFile, ap_rst, "(port)ap_rst");
    sc_trace(mVcdFile, r, "(port)r");
    sc_trace(mVcdFile, g, "(port)g");
    sc_trace(mVcdFile, b, "(port)b");
    sc_trace(mVcdFile, ap_return, "(port)ap_return");
    sc_trace(mVcdFile, ap_ce, "(port)ap_ce");
#endif
#ifdef __HLS_TRACE_LEVEL_INT__
    sc_trace(mVcdFile, b_read_reg_132, "b_read_reg_132");
    sc_trace(mVcdFile, g_read_reg_138, "g_read_reg_138");
    sc_trace(mVcdFile, r_read_reg_143, "r_read_reg_143");
    sc_trace(mVcdFile, f_r_fu_48_p3, "f_r_fu_48_p3");
    sc_trace(mVcdFile, f_g_fu_55_p3, "f_g_fu_55_p3");
    sc_trace(mVcdFile, p_shl_fu_70_p3, "p_shl_fu_70_p3");
    sc_trace(mVcdFile, p_shl1_fu_81_p3, "p_shl1_fu_81_p3");
    sc_trace(mVcdFile, p_shl1_cast_fu_88_p1, "p_shl1_cast_fu_88_p1");
    sc_trace(mVcdFile, p_shl_cast_fu_77_p1, "p_shl_cast_fu_77_p1");
    sc_trace(mVcdFile, tmp_5_fu_92_p2, "tmp_5_fu_92_p2");
    sc_trace(mVcdFile, grp_fu_114_p3, "grp_fu_114_p3");
    sc_trace(mVcdFile, grp_fu_123_p3, "grp_fu_123_p3");
    sc_trace(mVcdFile, grp_fu_114_p0, "grp_fu_114_p0");
    sc_trace(mVcdFile, grp_fu_114_p1, "grp_fu_114_p1");
    sc_trace(mVcdFile, grp_fu_114_p2, "grp_fu_114_p2");
    sc_trace(mVcdFile, grp_fu_123_p0, "grp_fu_123_p0");
    sc_trace(mVcdFile, grp_fu_123_p1, "grp_fu_123_p1");
    sc_trace(mVcdFile, grp_fu_123_p2, "grp_fu_123_p2");
    sc_trace(mVcdFile, grp_fu_114_p00, "grp_fu_114_p00");
    sc_trace(mVcdFile, grp_fu_114_p20, "grp_fu_114_p20");
    sc_trace(mVcdFile, grp_fu_123_p00, "grp_fu_123_p00");
    sc_trace(mVcdFile, grp_fu_123_p20, "grp_fu_123_p20");
#endif

    }
}

Sobel_rgb2yuv_bt709::~Sobel_rgb2yuv_bt709() {
    if (mVcdFile) 
        sc_close_vcd_trace_file(mVcdFile);

    delete Sobel_mac_muladd_16ns_7ns_21ns_23_1_U427;
    delete Sobel_mac_muladd_16ns_9ns_23ns_24_1_U428;
}

void Sobel_rgb2yuv_bt709::thread_ap_clk_no_reset_() {
    if (esl_seteq<1,1,1>(ap_const_logic_1, ap_ce.read())) {
        b_read_reg_132 = b.read();
        g_read_reg_138 = g.read();
        r_read_reg_143 = r.read();
    }
}

void Sobel_rgb2yuv_bt709::thread_ap_return() {
    ap_return = grp_fu_123_p3.read().range(23, 16);
}

void Sobel_rgb2yuv_bt709::thread_f_g_fu_55_p3() {
    f_g_fu_55_p3 = esl_concat<8,8>(g_read_reg_138.read(), ap_const_lv8_0);
}

void Sobel_rgb2yuv_bt709::thread_f_r_fu_48_p3() {
    f_r_fu_48_p3 = esl_concat<8,8>(r_read_reg_143.read(), ap_const_lv8_0);
}

void Sobel_rgb2yuv_bt709::thread_grp_fu_114_p0() {
    grp_fu_114_p0 =  (sc_lv<16>) (grp_fu_114_p00.read());
}

void Sobel_rgb2yuv_bt709::thread_grp_fu_114_p00() {
    grp_fu_114_p00 = esl_zext<23,16>(f_r_fu_48_p3.read());
}

void Sobel_rgb2yuv_bt709::thread_grp_fu_114_p1() {
    grp_fu_114_p1 =  (sc_lv<7>) (ap_const_lv23_36);
}

void Sobel_rgb2yuv_bt709::thread_grp_fu_114_p2() {
    grp_fu_114_p2 =  (sc_lv<21>) (grp_fu_114_p20.read());
}

void Sobel_rgb2yuv_bt709::thread_grp_fu_114_p20() {
    grp_fu_114_p20 = esl_zext<23,21>(tmp_5_fu_92_p2.read());
}

void Sobel_rgb2yuv_bt709::thread_grp_fu_123_p0() {
    grp_fu_123_p0 =  (sc_lv<16>) (grp_fu_123_p00.read());
}

void Sobel_rgb2yuv_bt709::thread_grp_fu_123_p00() {
    grp_fu_123_p00 = esl_zext<24,16>(f_g_fu_55_p3.read());
}

void Sobel_rgb2yuv_bt709::thread_grp_fu_123_p1() {
    grp_fu_123_p1 =  (sc_lv<9>) (ap_const_lv24_B7);
}

void Sobel_rgb2yuv_bt709::thread_grp_fu_123_p2() {
    grp_fu_123_p2 =  (sc_lv<23>) (grp_fu_123_p20.read());
}

void Sobel_rgb2yuv_bt709::thread_grp_fu_123_p20() {
    grp_fu_123_p20 = esl_zext<24,23>(grp_fu_114_p3.read());
}

void Sobel_rgb2yuv_bt709::thread_p_shl1_cast_fu_88_p1() {
    p_shl1_cast_fu_88_p1 = esl_zext<21,17>(p_shl1_fu_81_p3.read());
}

void Sobel_rgb2yuv_bt709::thread_p_shl1_fu_81_p3() {
    p_shl1_fu_81_p3 = esl_concat<8,9>(b_read_reg_132.read(), ap_const_lv9_0);
}

void Sobel_rgb2yuv_bt709::thread_p_shl_cast_fu_77_p1() {
    p_shl_cast_fu_77_p1 = esl_zext<21,20>(p_shl_fu_70_p3.read());
}

void Sobel_rgb2yuv_bt709::thread_p_shl_fu_70_p3() {
    p_shl_fu_70_p3 = esl_concat<8,12>(b_read_reg_132.read(), ap_const_lv12_0);
}

void Sobel_rgb2yuv_bt709::thread_tmp_5_fu_92_p2() {
    tmp_5_fu_92_p2 = (!p_shl1_cast_fu_88_p1.read().is_01() || !p_shl_cast_fu_77_p1.read().is_01())? sc_lv<21>(): (sc_biguint<21>(p_shl1_cast_fu_88_p1.read()) + sc_biguint<21>(p_shl_cast_fu_77_p1.read()));
}

}

